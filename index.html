<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>(주)에이블 콘텐츠 기획안</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <style>
        :root { 
            --main-color: #0077be; 
            --bg-color: #4facfe;   
            --input-bg: #fdfeff;
        }

        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            background-attachment: fixed;
            margin: 0; padding: 50px 20px; color: #333;
        }

        .container { 
            max-width: 1100px; 
            background: rgba(255, 255, 255, 0.98); 
            margin: 0 auto; 
            padding: 40px; 
            border-radius: 25px; 
            box-shadow: 0 20px 50px rgba(0, 50, 100, 0.2);
            box-sizing: border-box;
            position: relative; 
        }

        /* ===== 우측 상단 로고+텍스트 영역 ===== */
        .logo-group {
            position: absolute;
            top: -13px;
            right: 40px;
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 100;
        }

        .logo-text {
            font-size: 1.0em;
            font-weight: 600;
            color: #005a8d;
            letter-spacing: -0.4px;
        }

        .company-logo {
            width: 70px;
            height: auto;
        }

        /* ===== 타이틀 영역 ===== */
        .header { text-align: center; margin-bottom: 40px; }

        .title-wrapper {
            position: relative;
            width: 100%;
        }

        .title-wrapper img.main-banner {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
            display: block;
        }

        .title-overlay {
            position: absolute;
            bottom: calc(20% + 0.5cm);
            left: calc(50% - 6cm);
            transform: translateX(-50%);
            font-size: 4em;
            font-weight: 800;
            color: #ffffff;
            text-shadow: 0 4px 12px rgba(0,0,0,0.35);
            letter-spacing: -0.5px;
            pointer-events: none;
            white-space: nowrap;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }

        /* ===== 공통 스타일 ===== */
        .section { margin-bottom: 30px; min-width: 0; }
        .section-title { 
            font-weight: bold; font-size: 1.2em; color: #005a8d; 
            margin-bottom: 12px; display: block;
            border-left: 8px solid var(--main-color); 
            padding: 10px 18px; background-color: #f0faff;
            border-radius: 0 10px 10px 0;
        }
        label { font-size: 0.85em; font-weight: bold; color: #555; display: block; margin-bottom: 6px; }
        input[type="text"], textarea {
            font-family: inherit; width: 100%; padding: 14px 18px;
            border: 1.5px solid #d1e3ff; border-radius: 10px;
            font-size: 1em; box-sizing: border-box;
            background-color: var(--input-bg); transition: 0.2s;
            /* 기본 브라우저 노출 시에도 줄바꿈 허용 */
            white-space: pre-wrap;
            word-break: break-all;
        }
        input::placeholder, textarea::placeholder { font-family: inherit; color: #aaa; font-size: 0.95em; }
        textarea { resize: vertical; min-height: 100px; max-width: 100%; line-height: 1.6; }

        /* ===== 레이아웃 그리드 ===== */
        .grid-2 { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 30px; }
        .grid-3 { display: grid; grid-template-columns: 1.5fr 1fr 1fr; gap: 20px; }
        .short-area { height: 110px; }
        .content-area { height: 350px; }

        /* ===== 버튼 ===== */
        .btn-group {
            text-align: center; margin-top: 40px; display: flex; justify-content: center; gap: 20px;
            padding-top: 20px; border-top: 1px solid #eee;
        }
        button { padding: 16px 45px; font-size: 1.05em; border: none; border-radius: 50px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-reset { background-color: #f1f5f9; color: #64748b; }
        .btn-save-img { background-color: var(--main-color); color: white; }

        @media (max-width: 1024px) {
            .title-overlay { 
                left: 31%; bottom: 25%; transform: translateX(-50%); font-size: 2.5em; 
            }
        }

        @media (max-width: 768px) {
            body { padding: 20px 10px; }
            .container { padding: 20px; border-radius: 15px; }
            .logo-group { top: -10px; right: 15px; }
            .logo-text { font-size: 0.8em; }
            .company-logo { width: 50px; }
            .title-overlay { font-size: 1.6em; bottom: 23%; left: 31%; transform: translateX(-50%); }
            .grid-2, .grid-3 { grid-template-columns: 1fr; gap: 15px; }
            .btn-group { flex-direction: column; }
            button { width: 100%; padding: 14px; }
        }
    </style>
</head>

<body>

<div class="container" id="captureArea">
    <div class="logo-group">
        <span class="logo-text">찾아가는 진로체험 (주)에이블</span>
        <img src="에이블 로고.png" alt="회사 로고" class="company-logo">
    </div>

    <div class="header">
        <div class="title-wrapper">
            <img src="타이틀.png" alt="타이틀 이미지" class="main-banner">
            <div class="title-overlay" id="teamTitle">팀 이름</div>
        </div>
    </div>

    <div class="section">
        <span class="section-title">팀 정보</span>
        <div class="grid-2">
            <div>
                <label>팀 이름</label>
                <input type="text" class="save-data" id="teamName" placeholder="입력 시 상단에 반영됩니다. (5글자 이내)">
            </div>
            <div>
                <label>팀원 명단</label>
                <input type="text" class="save-data" id="teamMembers" placeholder="예: 김OO, 학번 / 이OO, 학번 ">
            </div>
        </div>
    </div>

    <div class="section">
        <span class="section-title">기본 정보</span>
        <div class="grid-3">
            <div><label>프로그램 제목</label><input type="text" class="save-data" id="progTitle" placeholder="예: 에이블의 전국탐방기"></div>
            <div><label>프로그램 유형</label><input type="text" class="save-data" id="progType" placeholder="예: 웹예능, 다큐멘터리"></div>
            <div><label>방송 시간 (분량)</label><input type="text" class="save-data" id="progTime" placeholder="예: 매주 금요일 / 75분 내외"></div>
        </div>
    </div>

    <div class="grid-2">
        <div class="section"><span class="section-title">출연진(캐스팅) 정보</span><input type="text" class="save-data" id="casting" placeholder="예: 유재석, 제니, 손흥민, 장원영 등"></div>
        <div class="section"><span class="section-title">간접광고(PPL) · 협찬사 정보</span><input type="text" class="save-data" id="sponsor" placeholder="예: ○○카페 장소 협찬, △△브랜드 의상"></div>
    </div>

    <div class="grid-2">
        <div class="section"><span class="section-title">기획 의도</span><textarea class="save-data short-area" id="intent" placeholder="콘텐츠의 목적 및 목표와 함께 기획 의도를 작성해주세요"></textarea></div>
        <div class="section"><span class="section-title">주요 시청 타겟</span><textarea class="save-data short-area" id="target" placeholder="예 : 10대 청소년, MZ 세대, 중장년층 등"></textarea></div>
    </div>

    <div class="section">
        <span class="section-title">콘텐츠 방향성 및 세부 콘텐츠</span>
        <textarea class="save-data content-area" id="details" placeholder="콘텐츠의 큰 방향성과 함께 세부 콘텐츠(코너) 내용을 작성해주세요."></textarea>
    </div>

    <div class="section">
        <span class="section-title">콘텐츠 목표 및 기대 효과</span>
        <input type="text" class="save-data" id="effect" placeholder="예: 유튜브 조회수 100만 달성, 백상예술대상 작품상 수상 등">
    </div>

    <div class="btn-group" data-html2canvas-ignore="true">
        <button class="btn-reset" onclick="clearStorage()">내용 초기화</button>
        <button class="btn-save-img" onclick="saveAsImage()">이미지로 저장</button>
    </div>
</div>

<script>
window.onload = function () {
    const inputs = document.querySelectorAll('.save-data');
    const teamTitle = document.getElementById('teamTitle');
    inputs.forEach(input => {
        const saved = localStorage.getItem(input.id);
        if (saved) {
            input.value = saved;
            if (input.id === 'teamName') teamTitle.textContent = saved;
        }
        input.addEventListener('input', () => {
            localStorage.setItem(input.id, input.value);
            if (input.id === 'teamName') teamTitle.textContent = input.value || '팀 이름';
        });
    });
};

function clearStorage() { if (confirm("초기화할까요?")) { localStorage.clear(); location.reload(); } }

function saveAsImage() {
    const captureArea = document.getElementById('captureArea');
    const saveBtn = document.querySelector('.btn-save-img');
    
    saveBtn.innerText = "저장 중...";
    saveBtn.disabled = true;

    window.scrollTo(0,0);

    setTimeout(() => {
        html2canvas(captureArea, {
            scale: 2,
            useCORS: true,
            allowTaint: true,
            backgroundColor: "#ffffff",
            onclone: function(clonedDoc) {
                // 핵심 수정: 이미지 저장 시 텍스트가 잘리지 않도록 input/textarea를 div로 변환
                const elements = clonedDoc.querySelectorAll('.save-data');
                elements.forEach(el => {
                    const div = clonedDoc.createElement('div');
                    div.innerText = el.value || el.placeholder;
                    div.style.width = el.offsetWidth + 'px';
                    div.style.minHeight = el.offsetHeight + 'px';
                    div.style.padding = '14px 18px';
                    div.style.fontSize = '1em';
                    div.style.lineHeight = '1.6';
                    div.style.border = '1.5px solid #d1e3ff';
                    div.style.borderRadius = '10px';
                    div.style.backgroundColor = '#fdfeff';
                    div.style.whiteSpace = 'pre-wrap'; // 줄바꿈 유지
                    div.style.wordBreak = 'break-all'; // 긴 단어 줄바꿈
                    div.style.boxSizing = 'border-box';
                    div.style.color = el.value ? '#333' : '#aaa'; // 입력값 없으면 placeholder 색상
                    
                    el.parentNode.replaceChild(div, el);
                });
            }
        }).then(canvas => {
            try {
                const link = document.createElement('a');
                link.href = canvas.toDataURL("image/png");
                link.download = '에이블_기획안_' + new Date().getTime() + '.png';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } catch (e) {
                alert("이미지 저장 실패. 인쇄/PDF 저장을 이용해주세요.");
            }
        }).finally(() => {
            saveBtn.innerText = "이미지로 저장";
            saveBtn.disabled = false;
        });
    }, 500);
}
</script>

</body>
</html>